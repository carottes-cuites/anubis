!function(e){var t={};function s(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.w={},s(s.s=26)}([function(e,t,s){"use strict";const r=s(1),i=s(18);e.exports=class extends r{constructor(e,t){super(t),this.name=e}init(){super.init(),this.commands={},this.itemsLimit=15}addCommand(e,t){this.commands[e]=t}execute(e,t){return new Promise((s,r)=>{void 0==e&&r("Data empty"),this.command(e.command.method)(this,e,t),s()})}command(e){return this.commands[e]}formatRequest(e,t,s){var r={uri:this.uri,qs:{},headers:{},json:!0};if(r.headers["User-Agent"]="Request-Promise",void 0!=s&&(r.uri=s),void 0!=e)for(var i in e)r.qs[i]=e[i];if(void 0!=t)for(var a in t)r.headers[a]=t[a];return r}doRequest(e,t){i(e).then(t).catch(function(e){console.error(e)})}}},function(e,t,s){"use strict";e.exports=class{constructor(e){this.init(),this.anubis=e}init(){}prepare(){}ready(){}run(){}format(e,t){var s=e.split("%s"),r=0;return e="",s.forEach(i=>{e+=i+(r<s.length-1?t[r]:""),r++}),e}}},function(e){e.exports={bot:{id:"anubis-bot",trigger:"anubis",name:"Anubis",description:"Music information assistant",metadata:{origins:"https://www.youtube.com/watch?v=OSfxEOK0elM"}},discord:{production:{token:"MzYyNTk0MzY0NTYxNTU1NDU2.DK08Gg.16nC-qZsUIpIzRtS49fVZEqRzac",secret:"dum9GMqa69rEVZCZDnTVMAajf0_ji6OJ",appid:"362594364561555456"},development:{token:"MzI5NTg5ODI4ODM4NDkwMTEy.DDV7Yg.GcWJp4Vk9HUM5l7IVsSo26nQLOw",secret:"f6SIBI8AErJwbJdrIl4rtJ6tQxUl9J7K",appid:"329589828838490112"},channel:{voice:{name:"Bot",type:"voice"},text:{name:"anubis",type:"text"}},ext:{integration_url:"https://discordapp.com/oauth2/authorize?client_id=362594364561555456&scope=bot&permissions=37215296"}},dropbox:{token:"EiyuJSUkd1wAAAAAAAADoCC-nOMf4QLHLhGdN-JxtGDtVC10C2wDWhi04d-VHnVH",secret:"",appid:""},spotify:{token:"BQBg0rOjd8ATPqXlriHUQRbqPOidobSpJeBpyHLW6YBy6oUGJA5Ii2dQTj6nQ4U_bmjwsbofl0JCFJYW5_g4yCKmAGqsL72pa0UFH4wb11mMq_Q0CLxhIf8-hbPfK9UREb5qRu85Gg",oldtoken:"BQDFt56invZ0igcTKo9HeTG0pqm43i5xh4ufWezrCXpzBKXyb0NqD5ADO0R-IlZ1CNFosMHJ7axNu837bc0-AYoVapn_mMIpfp9tlNvu8ce8shibrhER7BSe8ZEWxHhItHLokgmkrA"},twitch:{client:"54spadh41at1u05dv5ypq6aex98csn"},youtube:{api_key:"AIzaSyBhJMwq0Tz3UzLPX-Buv5P7YmDCiiWfhf4"}}},function(e,t,s){"use strict";const r=s(2);e.exports=class{constructor(){this.init()}init(){this.discord=r.discord,this.dropbox=r.dropbox,this.bot=r.bot,this.twitch=r.twitch,this.spotify=r.spotify,this.youtube=r.youtube}}},function(e,t,s){"use strict";e.exports=class{constructor(e){this.server=e,this.init()}init(){this.queue=new Array,this.status="idle",this.dispatcher=void 0,this.connection=void 0,this.remote_message=""}get currentTrack(){return this.queue[0]}get nextTrack(){return this.queue[1]}formatToQueue(e,t,s,r,i){return{title:e,streamURL:t,artist:s,fetcher:r,data:i}}add(e){if(Array.isArray(e)){let t="Feeding queue with :";e.forEach(e=>{this.queue.push(e),t+="\n* "+e.title+(""==e.artist?"":" - "+e.artist)}),this.server.communicator.message(this.server.text,t),console.log(t)}}empty(){if(this.queue.length>0){for(var e=this.queue.length;e>0;e--)this.queue.pop();console.log("Queue cleared")}else console.log("Nothing to clear, queue is already empty");this.server.communicator.message(this.server.text,"No more track to play.")}play(){if(this.queue.length>0){if("playing"==this.status)return;this.stream().then(()=>{switch(this.connection=void 0,this.dispatcher=void 0,this.remote_message){case"stop":this.empty();break;default:this.next()&&this.play()}this.remote_message=""}).catch(e=>{console.error(e),this.connection=void 0,this.dispatcher=void 0})}}preload(){void 0!=this.nextTrack&&(console.log("PRELOADING data"),this.nextTrack.fetcher(this.currentTrack.data).then(e=>{this.nextTrack.streamURL=e}))}stream(){var e=this.currentTrack;return new Promise((t,s)=>{var r=()=>t({data:"success"}),i=this.server.voice;void 0!=i&&(void 0==e.streamURL?e.fetcher(e.data).then(t=>{i.join().then(e=>(this.connection=e,e.playStream(t))).then(t=>{this.dispatcher=t,t.setBitrate("auto"),t.on("start",()=>{console.log("Stream starts..."),this.server.communicator.message(this.server.text,'Now playing "'+e.title+" - "+e.artist+'"'),this.status="playing"}),t.on("end",()=>(console.log("Stream end."),this.status="idle",r(),!0))}).catch(e=>{console.error(e)})}).catch(e=>{console.error(err),(()=>s({data:"fail"}))()}):i.join().then(t=>(this.connection=t,t.playStream(e.streamURL))).then(t=>{this.dispatcher=t,t.on("start",()=>{console.log("Stream starts..."),this.server.communicator.message(this.server.text,'Now playing "'+e.title+" - "+e.artist+'"'),this.status="playing"}),t.on("end",()=>(console.log("Stream end."),this.status="idle",r(),!0))}).catch(e=>{console.error(e)}))})}trackRead(){this.queue.length>0&&(console.log("TRACK READ"),this.queue.shift())}next(){return this.trackRead(),0!=this.queue.length||(console.log("Nothing more to play"),this.empty(),!1)}remote(e){switch(this.remote_message=e,this.remote_message){case"play":void 0==this.connection||this.connection.paused?this.play():(this.dispatcher.resume(),this.server.communicator.message(this.server.text,"Stream is resumed."));break;case"pause":void 0==this.connection||this.connection.paused||(this.dispatcher.pause(),this.server.communicator.message(this.server.text,"Stream is paused."));break;case"next":void 0!=this.dispatcher&&(this.queue.length>1?(this.server.communicator.message(this.server.text,"Skipping track..."),this.dispatcher.end(),this.dispatcher=void 0):this.server.communicator.message(this.server.text,'It\'s already the last track of the queue. "Stop" if you are pissed off.'));break;case"stop":void 0!=this.dispatcher&&(this.dispatcher.end(),this.connection.disconnect(),this.dispatcher=void 0,this.server.communicator.message(this.server.text,"Stream is stopped."))}}}},function(e,t,s){"use strict";var r=s(4);e.exports=class{constructor(e,t,s,r){this.bot=t,this.guild=e,this.communicator=s,this.config=r,this.init()}init(){this.player=new r(this)}get text(){var e=void 0;return this.guild.channels.forEach(t=>{"text"==t.type&&t.name==this.config.text.name&&(e=t)}),void 0==e&&(e=this.guild.defaultChannel,console.error('Text channel missing.\nPlease create "'+this.config.text.name+'" text channel.'),this.communicator.message(e,'Text channel missing.\nPlease create "'+this.config.text.name+'" text channel.')),e}get voice(){var e=void 0;return this.guild.channels.forEach(t=>{"voice"==t.type&&t.name==this.config.voice.name&&(e=t)}),void 0==e&&(console.error('Voice channel missing.\nPlease create "Music" voice channel.'),this.communicator.message(this.text,'!!! Voice channel missing. Please create "'+this.config.voice.name+'" voice channel. !!!')),e}}},function(e,t,s){"use strict";var r=s(5);e.exports=class{constructor(e){this.bot=e.bot,this.chanConfig=e.config.discord.channel,this.communicator=e.communicator,this.init()}init(){this.servers={}}addServer(e){return this.servers[e.id]=new r(e,this.bot,this.communicator,this.chanConfig),this.servers[e.id]}removeServer(e){delete this.servers[e]}getServer(e){return this.servers[e]}}},function(e,t,s){"use strict";let r=s(1);e.exports=class extends r{constructor(e){super(e)}init(){super.init(),this.queueMessages=[],this.processing=!1,this.dumbMessage="Stop calling me %s if you don't know how to make properly a request!"}ready(){this.setEvents()}setEvents(){console.log("Sentinel listens..."),this.anubis.bot.on("message",e=>{this.onMessage(e)}),this.anubis.bot.on("ready",()=>{this.onReady()})}onReady(){console.log("Bot is ready to communicate")}onMessage(e){this.validate(e)&&(this.addMessageToQueue(e),this.processing||this.processMessage(e))}addMessageToQueue(e){this.queueMessages.push(e)}processMessage(e){let t={request:e.content};console.log('Message received "'+e.content+'"'),t.serverID=this.anubis.interpreter.detectServer(e);try{if(this.processing=!0,void 0==t.serverID)return void console.error("Server detection failed. Please proceed to a maintenance of the system.");if(t.service=this.anubis.interpreter.detectService(e),void 0==t.service.obj){let s=this.anubis.interpreter.detectNativeCommand(e);if(void 0==s.command)throw console.error("No service nor native method found"),this.anubis.communicator.message(this.anubis.smanager.getServer(t.serverID).text,this.format(this.dumbMessage,[e.author])),new Error("No service nor native method found");console.log("Native command found"),t.service=s.service,t.command=s.command,t.request=this.anubis.interpreter.extractNativeCommand(t)}else{if(t.command=this.anubis.interpreter.extractCommand(t),void 0==t.command)throw console.error('Command "'+t.command.method+'" not found / registered for the service "'+service.name+'"'),this.anubis.communicator.message(this.anubis.smanager.getServer(t.serverID).text,this.format(this.dumbMessage,[e.author])),new Error('Command "'+t.command.method+'" not found / registered for the service "'+service.name+'"');t.request=this.anubis.interpreter.extractRequest(t)}t.service.obj.execute(t,e).then(e=>{this.processing=!1,this.messageProcessed()}).catch(e=>{throw new Error(e)})}catch(e){console.error(t.request),this.anubis.communicator.message(this.anubis.smanager.getServer(t.serverID).text,'Oups, something went wrong with the request "'+t.request.split(">")[1]+'".'),this.processing=!1,this.messageProcessed()}}messageProcessed(){this.queueMessages.length>0&&this.queueMessages.shift(),this.queueMessages.length>0&&this.processMessage(this.queueMessages[0])}validate(e){return e.content.includes(this.anubis.bot.user.id)}}},function(e,t,s){"use strict";var r=s(1);e.exports=class extends r{constructor(e){super(e)}broadcast(e){this.anubis.bot.guilds.forEach(t=>{this.message(t.defaultChannel,e,[])})}message(e,t,s){e.send(t).then(e=>{console.log('Message sent : "'+t+'"')}).catch(console.error)}}},function(e,t,s){"use strict";const r=s(0);e.exports=class extends r{constructor(e){super("native",e)}prepare(){this.addCommand("PLAY",this.play),this.addCommand("PAUSE",this.pause),this.addCommand("NEXT",this.next),this.addCommand("STOP",this.stop),this.addCommand("HELP",this.help),this.addCommand("CURRENT",this.current),this.addCommand("QUEUE",this.queue)}play(e,t,s){e.anubis.smanager.getServer(t.serverID).player.remote("play")}next(e,t,s){e.anubis.smanager.getServer(t.serverID).player.remote("next")}pause(e,t,s){e.anubis.smanager.getServer(t.serverID).player.remote("pause")}stop(e,t,s){e.anubis.smanager.getServer(t.serverID).player.remote("stop")}current(e,t,s){var r=e.anubis.smanager.getServer(t.serverID),i=r.player.currentTrack;e.anubis.communicator.message(r.text,'Now playing "'+i.title+" - "+i.artist+'"')}queue(e,t,s){var r=e.anubis.smanager.getServer(t.serverID);let i="Queue list :";if(0==r.player.queue.length)i="Queue list is empty.";else for(let e=0;e<r.player.queue.length;e++){let t=r.player.queue[e];i+="\n",i+=e+1+" :: "+t.title+(""!=t.artist?" - "+t.artist:"")}e.anubis.communicator.message(r.text,i)}help(e,t,s){var r=e.anubis.smanager.getServer(t.serverID);e.anubis.communicator.message(r.text,'Anubis is an audio-broadcast assistant, which allows you to share audio stream\'s simultaneously with your bitches.\n\nThe command structure should look like that one:\n"@<bot_name> <service> <arguments> <query>"\nHere is the list of commands you can use with the Anubis :\n\nPlayer :\n* Resume : play / resume\n* Pause : pause\n* Stop : stop\n* Next : next\n\nDeezer <dzr / deezer>:\n* Add content to queue : <your_query>* INCOMING : Feed queue with an artist soundtrack : -artist <artist_name>* INCOMING : Feed queue with a genre soundtrack : -mix <genre_name>\n\nTwitch <tw / twitch>:\n* Add audio-stream to queue: <your_query>\n\nBonus:\n* Go fuck yourself : origin')}}},function(e,t){e.exports=require("googleapis")},function(e,t){e.exports=require("ytdl-core")},function(e,t,s){"use strict";const r=s(11),i=s(10).google.youtube("v3"),a=s(0);e.exports=class extends a{constructor(e){super("Youtube",e)}init(){super.init(),this.uri="https://www.youtube.com/watch?v="}prepare(){this.addCommand("STREAM",this.stream),this.addCommand("PLAY_PLAYLIST",this.playlist)}playlist(e,t,s){console.log("Requested "+t.request);let r=e.anubis.smanager.getServer(t.serverID);r.communicator.message(r.text,"Fetching playlist's \""+t.request+'" data...'),i.playlistItems.list({key:e.anubis.config.youtube.api_key,part:"id,snippet",playlistId:t.request,maxResult:100},(s,r)=>{e.fetchVideo(r,e,t.serverID,0).then(s=>{e.anubis.smanager.getServer(t.serverID).player.play(),e.fetchPlaylist(e,t,r)})})}fetchData(e){return new Promise((t,s)=>{try{t(r(e.url,e.options))}catch(e){s(e)}})}fetchVideo(e,t,s,i){return new Promise((a,o)=>{let n=t.anubis.smanager.getServer(s).player,c=e.data.items[i].snippet,u=t.uri+c.resourceId.videoId;r.getInfo(u,(e,s)=>{n.add([n.formatToQueue(s.title,void 0,"",t.fetchData,{url:u,options:{filter:"audioonly"}})]),a()})})}fetchPlaylist(e,t,s){let r=s.data.items.length,a=(e.anubis.smanager.getServer(t.serverID).player,i=>new Promise((o,n)=>{e.fetchVideo(s,e,t.serverID,i).then(e=>{++i==r?o():o(a(i))})}));a(1).then(r=>{void 0!=s.data.nextPageToken&&i.playlistItems.list({key:e.anubis.config.youtube.api_key,pageToken:s.data.nextPageToken,part:"id,snippet",playlistId:t.request,maxResult:100},(s,r)=>{e.fetchPlaylist(e,t,r)})})}stream(e,t,s){var i=e.uri+t.request;console.log("STREAM YOUTUBE");try{r.getInfo(i,(s,a)=>{let o=r(i,{filter:"audioonly"}),n=e.anubis.smanager.getServer(t.serverID).player;n.add([n.formatToQueue(a.title,o,"")]),n.play()})}catch(e){console.log(e)}console.log("ENDD")}}},function(e,t){e.exports=require("twitch-get-stream")},function(e,t,s){"use strict";var r=s(0),i=s(13);e.exports=class extends r{constructor(e){super("twitch",e)}init(){super.init(),this.uri="https://api.twitch.tv/helix/",this.deprecated_uri="https://api.twitch.tv/kraken/"}prepare(){i=i(this.anubis.config.twitch.client),this.addCommand("STREAM",this.twitch)}twitch(e,t,s){var r=t.request.replace(" ","");e.getChannels(e,r).then(s=>{r=s.data,e.getAudio(r.name).then(s=>{var i=e.anubis.smanager.getServer(t.serverID).player;i.add([i.formatToQueue("Twitch",s.url,"Streamer "+r.name)]),i.play()}).catch(s=>{console.error(s);var i=e.anubis.smanager.getServer(t.serverID);switch(s.code){case 404:e.anubis.communicator.message(i.text,'"'+r.name+'" not found / alive at the moment');break;default:e.anubis.communicator.message(i.text,"Something went wrong, please try later.")}})})}getAudio(e){return new Promise((t,s)=>{var r=void 0,a={status:"fail"},o=()=>s(a);i.get(e).then(function(e){e.forEach(e=>{-1!=e.quality.indexOf("Audio")&&(r=e.url)}),void 0!=r?(a={status:"success",url:r},(()=>t(a))()):o()}).catch(e=>{a.code=e.status,o()})})}getUsers(e,t){return new Promise((t,s)=>{var r=e.formatRequest({id:54706574},{"Client-ID":e.anubis.config.twitch.client},e.uri+"users");e.doRequest(r,e=>{var t=e;console.log(t)})})}getStreams(e,t){return new Promise((t,s)=>{var r=e.formatRequest({type:"live"},{"Client-ID":e.anubis.config.twitch.client},e.uri+"streams");e.doRequest(r,e=>{var t=e;console.log(t)})})}getChannels(e,t){return new Promise((s,r)=>{var i={status:"fail"},a=e.formatRequest({query:""+t},{"Client-ID":e.anubis.config.twitch.client},e.deprecated_uri+"search/channels");e.doRequest(a,e=>(i.status="success",i.data=e.channels[0],(()=>s(i))(),(()=>r(i))()))})}}},function(e,t,s){"use strict";var r=s(0);e.exports=class extends r{constructor(e){super("spotify",e)}init(){super.init(),this.uri="https://api.spotify.com/v1/"}prepare(){this.addCommand("STREAM",this.stream)}spotifyFormat(e){return e.replace(" ","+")}stream(e,t,s){t.request=e.spotifyFormat(t.request);var r=e.formatRequest({q:t.request,type:"track"},{Authorization:"Bearer "+e.anubis.config.spotify.token},e.uri+"search");console.log(r),e.doRequest(r,e=>{console.log(e)})}refreshAccessToken(){}}},function(e,t,s){"use strict";var r=s(0);e.exports=class extends r{constructor(e){super("soundcloud",e)}}},function(e,t,s){"use strict";var r=s(0);e.exports=class extends r{constructor(e){super("deezer",e)}init(){super.init(),this.uri="http://api.deezer.com/"}prepare(){this.addCommand("STREAM",this.stream),this.addCommand("PLAY_ARTIST",this.artist),this.addCommand("PLAY_RADIO",this.radio)}deezerFormat(e){return e.replace(" ","+")}stream(e,t,s){t.request=e.deezerFormat(t.request);var r=e.formatRequest({q:t.request,limit:5},void 0,e.uri+"search/"),i=e.anubis.smanager.getServer(t.serverID).player;e.doRequest(r,e=>{for(var t=e.data,s=!1,r=1;r<t.length;r++)void 0!=t[r].preview&&null!=t[r].preview&&(t=t[r],s=!0);s&&(i.add([i.formatToQueue(t.title,t.preview,t.artist.name)]),i.play())})}artist(e,t,s){e.fetchArtist(e,t,s).then(s=>{t.request=e.deezerFormat(t.request);var r=e.formatRequest({limit:e.itemsLimit},void 0,e.uri+"artist/"+s.data.id+"/top"),i=e.anubis.smanager.getServer(t.serverID).player;e.doRequest(r,e=>{var t=!1,s=[];e.data.forEach(e=>{void 0!=e.preview&&null!=e.preview&&(s.push(i.formatToQueue(e.title,e.preview,e.artist.name)),t=!0)}),t&&(i.add(s),i.play())})})}fetchArtist(e,t,s){return new Promise((s,r)=>{var i={status:"fail"},a=()=>r(i);t.request=e.deezerFormat(t.request);var o=e.formatRequest({q:t.request,limit:5},void 0,e.uri+"search/artist/");e.doRequest(o,e=>{var r=e.data,o=void 0;if(void 0!=r.length){for(var n=0;n<r.length;n++)if(r[n].name.toLowerCase().indexOf(t.request)){i.data=r[n],o=r[n];break}void 0!=o?(()=>s(i))():a()}else a()})})}radio(e,t,s){e.fetchRadio(e,t,s).then(s=>{var r=e.formatRequest({limit:e.itemsLimit},void 0,e.uri+"radio/"+s.data.id+"/tracks"),i=e.anubis.smanager.getServer(t.serverID).player;e.doRequest(r,e=>{var t=!1,s=[];e.data.forEach(e=>{void 0!=e.preview&&null!=e.preview&&(s.push(i.formatToQueue(e.title,e.preview,e.artist.name)),t=!0)}),t&&(i.add(s),i.play())})}).catch(console.error)}fetchRadio(e,t,s){return new Promise((s,r)=>{var i={status:"fail"},a=()=>r(i);t.request=e.deezerFormat(t.request);var o=e.formatRequest({q:t.request,limit:5},void 0,e.uri+"search/radio/");e.doRequest(o,e=>{var r=e.data,o=void 0;if(void 0!=r.length){for(var n=0;n<r.length;n++)if(r[n].title.toLowerCase().indexOf(t.request)){i.data=r[n],o=r[n];break}void 0!=o?(()=>s(i))():a()}else a()})})}}},function(e,t){e.exports=require("request-promise")},function(e,t,s){"use strict";var r=s(0);e.exports=class extends r{constructor(e){super("dropbox",e)}}},function(e,t,s){"use strict";const r=s(1),i=s(19),a=s(17),o=s(16),n=s(15),c=s(14),u=s(12),h=s(9);e.exports=class extends r{constructor(e){super(e)}init(){super.init(),this.services={}}prepare(){for(var e in this.add("deezer",new a(this.anubis)),this.add("dropbox",new i(this.anubis)),this.add("soundcloud",new o(this.anubis)),this.add("spotify",new n(this.anubis)),this.add("twitch",new c(this.anubis)),this.add("youtube",new u(this.anubis)),this.add("native",new h(this.anubis)),this.services)this.services[e].prepare()}add(e,t){this.services[e]=t}service(e){return this.services[e]}}},function(e){e.exports={data:{native:{name:"Native",keywords:[],params:[],cmds:{play:{method:"PLAY",pattern:["play","resume"]},pause:{method:"PAUSE",pattern:["pause"]},stop:{method:"STOP",pattern:["stop"]},next:{method:"NEXT",pattern:["next"]},clean:{method:"CLEAN",pattern:["clean"]},reboot:{method:"REBOOT",pattern:["reboot"]},help:{method:"HELP",pattern:["help"]},current:{method:"CURRENT",pattern:["current","playing"]},queue:{method:"QUEUE",pattern:["queue","q"]}}},deezer:{name:"Deezer",keywords:["dzr","deezer"],params:["alt"],cmds:{stream:{method:"STREAM",pattern:["default"]},artist:{method:"PLAY_ARTIST",pattern:["artist"]},radio:{method:"PLAY_RADIO",pattern:["radio","mix"]}}},twitch:{name:"Twitch",keywords:["twitch","tw"],cmds:{stream:{method:"STREAM",pattern:["default"]}}},dropbox:{name:"Dropbox",keywords:["dbx","dropbox"]},soundcloud:{name:"SoundCloud",keywords:["sc","soundcloud"]},spotify:{name:"Spotify",keywords:["spotify"],cmds:{stream:{method:"STREAM",pattern:["default"]}}},youtube:{name:"Youtube",keywords:["youtube","yt"],cmds:{stream:{method:"STREAM",pattern:["default"]},playlist:{method:"PLAY_PLAYLIST",pattern:["playlist"]}}}}}},function(e,t,s){"use strict";var r=s(1),i=s(21);e.exports=class extends r{constructor(e){super(e)}messageReceived(){}detectServer(e){var t=this.anubis.smanager.getServer(e.guild.id);return void 0==t&&(t=this.anubis.smanager.addServer(e.guild)),t.guild.id}detectService(e){var t=this.dump(e),s={};for(var r in i.data)r=i.data[r],void 0==s.name&&r.keywords.forEach(e=>{void 0==s.name&&-1!=t.indexOf(e+" ")&&(s.name=r.name,s.keyword=e,s.obj=this.anubis.fetcherManager.service(s.name.toLowerCase()))});return s}detectNativeCommand(e){var t=this.dump(e)+" ",s={},r=i.data.native;for(var a in r.cmds){if(void 0!=s.method)break;(a=r.cmds[a]).pattern.forEach(e=>{-1!=t.indexOf(e+" ")&&(s.command={method:a.method,pattern:e},s.service={name:r.name,keyword:"",obj:this.anubis.fetcherManager.service(r.name.toLowerCase())})})}return s}extractCommand(e){var t,s=e.request,r={};for(var a in i.data)if("Native"!=(a=i.data[a]).name&&a.name.toLowerCase()==e.service.name.toLowerCase())for(var o in a.cmds){if(void 0!=r.method)break;(o=a.cmds[o]).pattern.forEach(e=>{"default"!=e?-1!=s.indexOf(e+" ")&&(r.method=o.method,r.pattern=e):t=o})}return void 0==r.method&&(r.method=t.method,r.pattern=""),r}extractRequest(e){var t=e.request.split("> ")[1];return t=t.replace(e.service.keyword+" ",""),""!==e.command.pattern&&(t=t.replace(e.command.pattern+" ","")),t}extractNativeCommand(e){return e.request.split("> ")[1]}extractParams(e){return[]}dump(e){return e.content.split("> ")[1]}}},function(e,t){e.exports=require("discord.js")},function(e,t,s){"use strict";var r=s(23);const i=s(22);var a=s(20),o=s(8),n=s(7),c=s(6);e.exports=class{constructor(e){this.config=e,this.init()}init(){this.bot=new r.Client,this.sentinel=new n(this),this.interpreter=new i(this),this.fetcherManager=new a(this),this.communicator=new o(this),this.smanager=new c(this)}prepare(){this.fetcherManager.prepare(),this.interpreter.prepare(),this.communicator.prepare(),this.sentinel.prepare()}ready(){this.interpreter.ready(),this.fetcherManager.ready(),this.communicator.ready(),this.sentinel.ready()}run(){this.interpreter.run(),this.fetcherManager.run(),this.communicator.run(),this.sentinel.run()}connect(){console.log('Trying to communicate with "Discord" server...'),this.bot.login(this.config.discord.production.token)}disconnect(){}}},function(e,t,s){"use strict";const r=s(24),i=s(3);e.exports=class{constructor(){this.init()}init(){console.log('Environment defined : "production"'),this.config=new i,this.anubis=new r(this.config)}prepare(){this.anubis.prepare()}ready(){this.anubis.ready()}run(){this.anubis.connect()}}},function(e,t,s){"use strict";let r=new(s(25));r.prepare(),r.ready(),r.run()}]);